# cross_validated_causal

## No-covariate setting
``mean_eps.py``: Varying bias.

``mean_n_obs.py``: Varying the number of observational data.
### Usage
Install missing packages if needed.

Run 
```
python mean_eps.py
```
or 
```
python mean_n_obs.py
```
Results are saved as JSON files (for data) and PDF files (for figures). Detailed usage see python scripts.

## Linear setting
``mean_eps.py``: Varying bias.

``mean_n_obs.py``: Varying the number of observational data.
### Usage
Choice 1: Directly run 
```
python linear_eps.py
``` 
or 
```
python linear_n_obs.py
``` 

Choise 2: Use a bash script and specify ``--cpus-per-task`` for parallel computing.

Results are saved as JSON files (for data) and PDF files (for figures). Detailed usage see python scripts.


## Experiments on the LaLonde dataset
### Data
Download the ``.txt`` files of **NSW Data Files (Dehejia-Wahha Sample)** and **PSID and CPS Data Files** from [this link](http://users.nber.org/~rdehejia/nswdata2.html) and put them into a ``\data`` folder.

### Code

``lalonde_baseline.Rmd``: Estimation and bootstrap for baselines in Table 2 and 3. 

``read_lalonde_data.R``: Script to read data, sourced in ``lalonde_baseline.Rmd``.

``lalonde_cv.py``: Run our method on the LaLonde dataset.

``lalonde_cv_bootstrap.py``: Bootstrap our method on the LaLonde dataset. 

### Usage

The R Markdown script can be run in [RStudio](https://rmarkdown.rstudio.com/lesson-2.html).

The python scripts use a data file ``lalonde.csv``, which is generated by ``lalonde_baseline.Rmd``. For users who are not familiar with R, a copy of ``lalonde.csv`` will be available upon request. To run the python scripts,

Choice 1: Directly run 
```
python lalonde_cv.py
``` 
or 
```
python lalonde_cv_bootstrap.py
``` 
Results are saved as JSON files (for data) and TXT files (for tables).

Choise 2: Use a bash script and specify ``--cpus-per-task`` for parallel computing.



